<!DOCTYPE html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>
<body style="background-color:cornsilk;">
<div class="container">
<div style="margin-left: 30%;margin-right: 30%;margin-top: 100px;">
    <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">User ID</span>
        </div>
        <input type="text" placeholder="Email" class="form-control" id="email" aria-describedby="basic-addon3">
      </div>
    <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">New Password</span>
        </div>
        <input type="password" placeholder="Password" class="form-control" id="password" aria-describedby="basic-addon3">
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend">
          <span class="input-group-text" id="basic-addon3">Re-Enter Password</span>
        </div>
        <input type="password" placeholder="Password" class="form-control" id="repassword" aria-describedby="basic-addon3">
      </div>
      <button type="button" class="btn btn-success" onclick="reset()">Reset</button>
     
</div>
</div>


<script>
    async function reset(){
      try{  
        if(document.getElementById("password").value==document.getElementById("repassword").value) { 
        
        console.log()
        let res=await fetch("http://localhost:3000/users/reset",{
            method:"POST",
            body:JSON.stringify({
                email:document.getElementById("email").value,
                password:document.getElementById("password").value
            }),
            headers:{
                "Content-Type":"application/json",
            }
            
        })
        let result=await res.json()
        if(result.message=="password updated"){
          alert("Password changed")
            window.open("index.html","_self")
        }
        else{
           alert("Wrong UserID")
           
              location.reload();
          
        }
    }else{
        alert("Passwords didn't match")
        
              location.reload();
           
    }
       
        
    }catch(err){console.log(err)}
    
}
</script>
</body>